
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overview of PySoundTool &#8212; PySoundTool 0.1.0b documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="overview-of-pysoundtool">
<h1>Overview of PySoundTool<a class="headerlink" href="#overview-of-pysoundtool" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>This repository serves as a place to explore sound. Therefore, small
sound datasets are included in this repo. The size is appx. 30-40MB. If
you clone this repo, this sound data will be cloned as well.</p>
<p>If you are fine with this, clone this repository. Set the working
directory where you clone this repository.</p>
<p>Start a virtual environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ python3 -m venv env
$ source env/bin/activate
(env)..$
</pre></div>
</div>
<p>Then install necessary installations via pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(env)..$ pip install -r requirements.txt
</pre></div>
</div>
<p>Feel free to use this tool in your own scripts (I show examples below).
You can also explore <em>some</em> of its functionality via jupyter notebook:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(env)..$ cd jupyternotebooks/
(env)..$ jupyter notebook
</pre></div>
</div>
<p>There you will find example scripts using PySoundTool.</p>
</div>
<div class="section" id="import">
<h2>Import<a class="headerlink" href="#import" title="Permalink to this headline">¶</a></h2>
<p>You can run the examples below using ipython or other python console, or
python script.</p>
<p>Install and run ipython:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>(env)..$ pip install ipython
(env)..$ ipython
&gt;&gt;&gt; # import what we need for the examples:
&gt;&gt;&gt; import pysoundtool as pyst
&gt;&gt;&gt; # for saving wavfiles:
&gt;&gt;&gt; from scipy.io.wavfile import write
</pre></div>
</div>
</div>
<div class="section" id="visualization">
<h2>Visualization<a class="headerlink" href="#visualization" title="Permalink to this headline">¶</a></h2>
<div class="section" id="python-time-domain">
<h3>“Python”: Time Domain<a class="headerlink" href="#python-time-domain" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="s1">&#39;./audiodata/python.wav&#39;</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;signal&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id3">
<img alt="Imgur" src="https://i.imgur.com/pz0MHui.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="python-frequency-domain">
<h3>“Python”: Frequency Domain<a class="headerlink" href="#python-frequency-domain" title="Permalink to this headline">¶</a></h3>
<p>The mel frequecy cepstral coefficients (MFCCs) and log-mel filterbank
energies (FBANK) are two very common acoustic features used in machine
and deep learning.</p>
<p>Let’s take a look and see how the word “python” looks when these
features are extracted and also how window settings influence the
features.</p>
<div class="section" id="mfcc">
<h4>MFCC:<a class="headerlink" href="#mfcc" title="Permalink to this headline">¶</a></h4>
<div class="section" id="window-20-ms-window-overlap-10-ms-default">
<h5>window 20 ms, window overlap 10 ms (default)<a class="headerlink" href="#window-20-ms-window-overlap-10-ms-default" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="s1">&#39;./audiodata/python.wav&#39;</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;mfcc&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id4">
<img alt="Imgur" src="https://i.imgur.com/hx94jeQ.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="window-100-ms-window-overlap-50-ms">
<h5>window 100 ms, window overlap 50 ms<a class="headerlink" href="#window-100-ms-window-overlap-50-ms" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="s1">&#39;./audiodata/python.wav&#39;</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;mfcc&#39;</span><span class="p">,</span>
<span class="go">                            win_size_ms = 100, win_shift_ms = 50)</span>
</pre></div>
</div>
<div class="figure align-default" id="id5">
<img alt="Imgur" src="https://i.imgur.com/XY2rGQj.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="fbank">
<h4>FBANK:<a class="headerlink" href="#fbank" title="Permalink to this headline">¶</a></h4>
<div class="section" id="id1">
<h5>window 20 ms, window overlap 10 ms (default)<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="s1">&#39;./audiodata/python.wav&#39;</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;fbank&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id6">
<img alt="Imgur" src="https://i.imgur.com/7CroE1i.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="id2">
<h5>window 100 ms, window overlap 50 ms<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h5>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="s1">&#39;./audiodata/python.wav&#39;</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;fbank&#39;</span><span class="p">,</span>
<span class="go">                            win_size_ms = 100, win_shift_ms = 50)</span>
</pre></div>
</div>
<div class="figure align-default" id="id7">
<img alt="Imgur" src="https://i.imgur.com/r3jVPdB.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="sound-creation">
<h2>Sound Creation<a class="headerlink" href="#sound-creation" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">exsound</span><span class="o">.</span><span class="n">create_signal</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">amplitude</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">samplerate</span><span class="o">=</span><span class="mi">8000</span><span class="p">,</span> <span class="n">dur_sec</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data2</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">exsound</span><span class="o">.</span><span class="n">create_signal</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mi">1200</span><span class="p">,</span> <span class="n">amplitude</span><span class="o">=</span><span class="mf">0.9</span><span class="p">,</span> <span class="n">samplerate</span><span class="o">=</span><span class="mi">8000</span><span class="p">,</span> <span class="n">dur_sec</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data3</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">exsound</span><span class="o">.</span><span class="n">create_signal</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">amplitude</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span> <span class="n">samplerate</span><span class="o">=</span><span class="mi">8000</span><span class="p">,</span> <span class="n">dur_sec</span><span class="o">=</span><span class="mf">0.2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_mixed</span> <span class="o">=</span> <span class="n">data</span> <span class="o">+</span> <span class="n">data2</span> <span class="o">+</span> <span class="n">data3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="n">data_mixed</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;signal&#39;</span><span class="p">,</span> <span class="n">samplerate</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id8">
<img alt="Imgur" src="https://i.imgur.com/UYU0Ft0.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<p>Mixed with noise:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">noise</span> <span class="o">=</span> <span class="n">exsound</span><span class="o">.</span><span class="n">create_noise</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">data_mixed</span><span class="p">),</span> <span class="n">amplitude</span><span class="o">=</span><span class="mf">0.1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_noisy</span> <span class="o">=</span> <span class="n">data_mixed</span> <span class="o">+</span> <span class="n">noise</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="n">data_noisy</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;signal&#39;</span><span class="p">,</span> <span class="n">samplerate</span> <span class="o">=</span> <span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id9">
<img alt="Imgur" src="https://i.imgur.com/ZvyAdUZ.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<p>In the time domain, it is difficult to see the three different signals
at all…</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="n">data_noisy</span><span class="p">,</span> <span class="n">samplerate</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;fbank&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id10">
<img alt="Imgur" src="https://i.imgur.com/RaDhEfq.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>In the frequency domain, you can see that there are distinct frequencies
in the signal, approximately 3.</p>
</div>
<div class="section" id="adding-sounds">
<h2>Adding sounds<a class="headerlink" href="#adding-sounds" title="Permalink to this headline">¶</a></h2>
<div class="section" id="long-background-sound">
<h3>Long background sound<a class="headerlink" href="#long-background-sound" title="Permalink to this headline">¶</a></h3>
<p>Here we will add traffic background noise to the speech segment
‘python’.</p>
<p>‘python’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">python</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">soundprep</span><span class="o">.</span><span class="n">loadsound</span><span class="p">(</span><span class="s1">&#39;./audiodata/python.wav&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="n">python</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;signal&#39;</span><span class="p">,</span> <span class="n">samplerate</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id11">
<img alt="Imgur" src="https://i.imgur.com/pz0MHui.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<p>traffic background noise:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">traffic</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">soundprep</span><span class="o">.</span><span class="n">loadsound</span><span class="p">(</span><span class="s1">&#39;./audiodata/traffic.aiff&#39;</span><span class="p">)</span>
<span class="go">Step 1: ensure filetype is compatible with scipy library</span>
<span class="go">Success!</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="n">traffic</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;signal&#39;</span><span class="p">,</span> <span class="n">samplerate</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id12">
<img alt="Imgur" src="https://i.imgur.com/rFn3x2Y.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
<p>Combining them: * noise/sound to a scale of 0.3 * 1 second delay for
the speech * total length: 5 seconds</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">python_traffic</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">soundprep</span><span class="o">.</span><span class="n">add_sound_to_signal</span><span class="p">(</span>
<span class="go">                                signal = &#39;./audiodata/python.wav&#39;,</span>
<span class="go">                                sound = &#39;./audiodata/traffic.aiff&#39;,</span>
<span class="go">                                scale = 0.3,</span>
<span class="go">                                delay_target_sec = 1,</span>
<span class="go">                                total_len_sec = 5)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="n">python_traffic</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;signal&#39;</span><span class="p">,</span> <span class="n">samplerate</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id13">
<img alt="Imgur" src="https://i.imgur.com/z4E2HSj.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="short-background-sound">
<h3>Short background sound<a class="headerlink" href="#short-background-sound" title="Permalink to this headline">¶</a></h3>
<p>rain background noise:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">rain</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">soundprep</span><span class="o">.</span><span class="n">loadsound</span><span class="p">(</span><span class="s1">&#39;./audiodata/rain.wav&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="n">rain</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;signal&#39;</span><span class="p">,</span> <span class="n">samplerate</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id14">
<img alt="Imgur" src="https://i.imgur.com/kmmwZta.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<p>This sound will be repeated to match the desired background noise length
Note: sometimes artifacts can occur and may need additional processing.
Longer background noises are more ideal.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">python_rain</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">soundprep</span><span class="o">.</span><span class="n">add_sound_to_signal</span><span class="p">(</span>
<span class="go">                                signal = &#39;./audiodata/python.wav&#39;,</span>
<span class="go">                                sound = &#39;./audiodata/rain.wav&#39;,</span>
<span class="go">                                scale = 0.3,</span>
<span class="go">                                delay_target_sec = 1,</span>
<span class="go">                                total_len_sec = 5)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exsound</span><span class="o">.</span><span class="n">visualize_audio</span><span class="p">(</span><span class="n">python_rain</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;signal&#39;</span><span class="p">,</span> <span class="n">samplerate</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="figure align-default" id="id15">
<img alt="Imgur" src="https://i.imgur.com/BbdbDyu.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="filtering">
<h2>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h2>
<p>NOTE: only .wav files of bit depth 16 or 32 can currently be used. See
subsection ‘Convert Soundfiles for use with scipy.io.wavfile’</p>
<p>For visuals, we will look at the sound as their FBANK features.</p>
<div class="section" id="noisy-sound-file">
<h3>Noisy sound file<a class="headerlink" href="#noisy-sound-file" title="Permalink to this headline">¶</a></h3>
<p>Add ‘python’ speech segment and traffic noise to create noisy speech.
Save as .wav file.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">speech</span> <span class="o">=</span> <span class="s1">&#39;./audiodata/python.wav&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">noise</span> <span class="o">=</span> <span class="s1">&#39;./audiodata/traffic.aiff&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_noisy</span><span class="p">,</span> <span class="n">samplerate</span> <span class="o">=</span> <span class="n">pyst</span><span class="o">.</span><span class="n">dsp</span><span class="o">.</span><span class="n">add_backgroundsound</span><span class="p">(</span><span class="n">speech</span><span class="p">,</span> <span class="n">noise</span><span class="p">,</span> <span class="n">delay_mainsound_sec</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">scale_background</span> <span class="o">=</span> <span class="mf">0.3</span><span class="p">,</span> <span class="n">total_len_sec</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pyst</span><span class="o">.</span><span class="n">plotsound</span><span class="p">(</span><span class="n">data_noisy</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">samplerate</span><span class="p">,</span> <span class="n">feature_type</span><span class="o">=</span><span class="s1">&#39;fbank&#39;</span><span class="p">,</span> <span class="n">power_scale</span><span class="o">=</span><span class="s1">&#39;power_to_db&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="_images/python_traffic_fbank.png" src="_images/python_traffic_fbank.png" />
<p>Then filter the traffic out:</p>
<div class="figure align-default" id="id16">
<img alt="Imgur" src="https://i.imgur.com/FOcjwAl.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</div>
<p>This is what the noise power spectrum of the full FFT looks like:</p>
<div class="figure align-default" id="id17">
<img alt="Imgur" src="https://i.imgur.com/7CIiTfM.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</div>
<p>If you set <code class="docutils literal notranslate"><span class="pre">real_signal</span></code> to true, this is what the noise power
spectrum looks like:</p>
<div class="figure align-default" id="id18">
<img alt="Imgur" src="https://i.imgur.com/6AWr5dV.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id18" title="Permalink to this image">¶</a></p>
</div>
<p>In numpy, you can use the full fft signal by using numpy.fft.fft or you
can use the real fft, for audio signals for example, by using
numpy.fft.rfft. The latter may be more efficent and there isn’t a
difference between the two. I’ve seen some Implement the full fft and
others the rfft.</p>
<div class="section" id="wiener-filter">
<h4>Wiener filter<a class="headerlink" href="#wiener-filter" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pyst</span><span class="o">.</span><span class="n">filtersignal</span><span class="p">(</span><span class="n">output_filename</span> <span class="o">=</span> <span class="s1">&#39;python_traffic_wiener_filter.wav&#39;</span><span class="p">,</span>
<span class="go">                    audiofile = noisy_speech_filename,</span>
<span class="go">                    filter_type = &#39;wiener&#39;,</span>
<span class="go">                    filter_scale = 1) # how strong the filter should be</span>
</pre></div>
</div>
<p>What the filtered signal looks like in raw samples, power spectrum
(basically stft), and fbank features:</p>
<div class="figure align-default" id="id19">
<img alt="Imgur" src="https://i.imgur.com/42liCr1.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id19" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id20">
<img alt="Imgur" src="https://i.imgur.com/tx87UEL.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id21">
<img alt="Imgur" src="https://i.imgur.com/TrwKJ4j.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id21" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="wiener-filter-with-postfilter">
<h4>Wiener filter with postfilter<a class="headerlink" href="#wiener-filter-with-postfilter" title="Permalink to this headline">¶</a></h4>
<p>If there is some distortion in the signal, try a post filter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pyst</span><span class="o">.</span><span class="n">filtersignal</span><span class="p">(</span><span class="n">output_filename</span> <span class="o">=</span> <span class="s1">&#39;python_traffic_wiener_postfilter.wav&#39;</span><span class="p">,</span>
<span class="go">                    audiofile = noisy_speech_filename,</span>
<span class="go">                    filter_type = &#39;wiener_postfilter&#39;,</span>
<span class="go">                    filter_scale = 1, # how strong the filter should be</span>
<span class="go">                    apply_postfilter = True)</span>
</pre></div>
</div>
<p>What the filtered signal looks like in raw samples, power spectrum
(basically stft), and fbank features:</p>
<div class="figure align-default" id="id22">
<img alt="Imgur" src="https://i.imgur.com/zTR4kX3.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id22" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id23">
<img alt="Imgur" src="https://i.imgur.com/lKe4dRQ.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id23" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id24">
<img alt="Imgur" src="https://i.imgur.com/AwontYt.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id24" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="band-spectral-subtraction-filter">
<h4>Band spectral subtraction filter<a class="headerlink" href="#band-spectral-subtraction-filter" title="Permalink to this headline">¶</a></h4>
<p>For comparison, try a band spectral subtraction filter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pyst</span><span class="o">.</span><span class="n">filtersignal</span><span class="p">(</span><span class="n">output_filename</span> <span class="o">=</span> <span class="s1">&#39;python_traffic_bandspecsub.wav&#39;</span><span class="p">,</span>
<span class="go">                    audiofile = noisy_speech_filename,</span>
<span class="go">                    filter_type = &#39;band_spectral_subtracion&#39;,</span>
<span class="go">                    filter_scale = 1, # how strong the filter should be</span>
<span class="go">                    num_bands = 6)</span>
</pre></div>
</div>
<p>What the filtered signal looks like in raw samples, power spectrum
(basically stft), and fbank features:</p>
<div class="figure align-default" id="id25">
<img alt="Imgur" src="https://i.imgur.com/Kg9cR2S.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id25" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id26">
<img alt="Imgur" src="https://i.imgur.com/jSX4ijV.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id26" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-default" id="id27">
<img alt="Imgur" src="https://i.imgur.com/cFdaGLl.png" />
<p class="caption"><span class="caption-text">Imgur</span><a class="headerlink" href="#id27" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>
<div class="section" id="scene-classification-cnn">
<h2>Scene Classification (CNN)<a class="headerlink" href="#scene-classification-cnn" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="convolutional-neural-network-simple-sound-classification">
<h2>Convolutional Neural Network: Simple sound classification<a class="headerlink" href="#convolutional-neural-network-simple-sound-classification" title="Permalink to this headline">¶</a></h2>
<p>NOTE: only .wav files of bit depth 16 or 32 can currently be used. See
subsection ‘Convert Soundfiles for use with scipy.io.wavfile’</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pysoundtool.templates</span> <span class="kn">import</span> <span class="n">soundclassifier</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">project_name</span> <span class="o">=</span> <span class="s1">&#39;test_backgroundnoise_classifier&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">headpath</span> <span class="o">=</span> <span class="s1">&#39;saved_features_and_models&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">audio_classes_dir</span> <span class="o">=</span> <span class="s1">&#39;./audiodata/minidatasets/background_noise/&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">soundclassifier</span><span class="p">(</span><span class="n">project_name</span><span class="p">,</span>
<span class="go">                headpath,</span>
<span class="go">                audiodir = audio_classes_dir,</span>
<span class="go">                feature_type = &#39;mfcc&#39;,</span>
<span class="go">                target_wavfile = &#39;./audiodata/rain.wav&#39;)</span>
</pre></div>
</div>
<p>Some model training stuff should print out… and at the end a label the
sound was classified as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Label</span> <span class="n">classified</span><span class="p">:</span>  <span class="n">cafe</span>
</pre></div>
</div>
<div class="section" id="speech-processing-cnn-lstm">
<h3>Speech Processing (CNN + LSTM)<a class="headerlink" href="#speech-processing-cnn-lstm" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="signal-denoising-autoencoder">
<h3>Signal Denoising (Autoencoder)<a class="headerlink" href="#signal-denoising-autoencoder" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="in-the-works-speech-separation">
<h3>In the works: Speech Separation<a class="headerlink" href="#in-the-works-speech-separation" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="in-the-works-emotion-recognition">
<h3>In the works: Emotion Recognition<a class="headerlink" href="#in-the-works-emotion-recognition" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="in-the-works-signal-similarity">
<h3>In the works: Signal Similarity<a class="headerlink" href="#in-the-works-signal-similarity" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="audio-file-adjustment">
<h2>Audio File Adjustment<a class="headerlink" href="#audio-file-adjustment" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="sound-file-prep">
<h2>Sound File Prep<a class="headerlink" href="#sound-file-prep" title="Permalink to this headline">¶</a></h2>
<div class="section" id="convert-to-wav-file">
<h3>Convert to .wav file<a class="headerlink" href="#convert-to-wav-file" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">newfilename</span> <span class="o">=</span> <span class="n">soundprep</span><span class="o">.</span><span class="n">convert2wav</span><span class="p">(</span><span class="s1">&#39;./audiodata/traffic.aiff&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">newfilename</span><span class="p">)</span>
<span class="go">audiodata/traffic.wav</span>
</pre></div>
</div>
</div>
<div class="section" id="ensure-sound-data-is-mono-channel">
<h3>Ensure sound data is mono channel<a class="headerlink" href="#ensure-sound-data-is-mono-channel" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">scipy.io.wavfile</span> <span class="kn">import</span> <span class="n">read</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sr</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="s1">&#39;./audiodata/python.wav&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">datamono</span> <span class="o">=</span> <span class="n">soundprep</span><span class="o">.</span><span class="n">stereo2mono</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="c1"># if it is already, nothing will change</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">==</span> <span class="nb">sum</span><span class="p">(</span><span class="n">data</span><span class="o">==</span><span class="n">datamono</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sr</span><span class="p">,</span> <span class="n">data_2channel</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="s1">&#39;./audiodata/dogbark_2channels.wav&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_2channel</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(18672, 2)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_1channel</span> <span class="o">=</span> <span class="n">soundprep</span><span class="o">.</span><span class="n">stereo2mono</span><span class="p">(</span><span class="n">data_2channel</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_1channel</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(18672,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_2channel</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
<span class="go">array([[208, 208],</span>
<span class="go">       [229, 229],</span>
<span class="go">       [315, 315],</span>
<span class="go">       [345, 345],</span>
<span class="go">       [347, 348]], dtype=int16)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data_1channel</span><span class="p">[:</span><span class="mi">5</span><span class="p">]</span>
<span class="go">array([208, 229, 315, 345, 347], dtype=int16)</span>
</pre></div>
</div>
</div>
<div class="section" id="convert-soundfiles-for-use-with-scipy-io-wavfile">
<h3>Convert Soundfiles for use with scipy.io.wavfile<a class="headerlink" href="#convert-soundfiles-for-use-with-scipy-io-wavfile" title="Permalink to this headline">¶</a></h3>
<p>As of now, the software uses scipy.io.wavfile, a compatible module for
Jupyter environments. If you have files that are not compatible, this
should save the file / sound data as a compatible state.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">newfilename</span> <span class="o">=</span> <span class="n">soundprep</span><span class="o">.</span><span class="n">prep4scipywavfile</span><span class="p">(</span><span class="s1">&#39;./audiodata/traffic.aiff&#39;</span><span class="p">)</span>
<span class="go">Converting file to .wav</span>
<span class="go">Saved file as audiodata/traffic.wav</span>
</pre></div>
</div>
</div>
<div class="section" id="audio-file-conversion">
<h3>Audio File Conversion<a class="headerlink" href="#audio-file-conversion" title="Permalink to this headline">¶</a></h3>
<p>For example, build a dataset and convert all files to .wav</p>
</div>
<div class="section" id="in-the-works-data-set-check">
<h3>In the works: Data Set Check<a class="headerlink" href="#in-the-works-data-set-check" title="Permalink to this headline">¶</a></h3>
<p>See the variation of a set of audio files: mean length, volume, sample rates, channels, snr etc.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Aislyn Rose.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.1.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/overview.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>